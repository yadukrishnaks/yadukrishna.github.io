<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Coax/Fiber/Zip Tabs</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input { padding: 5px; margin: 5px 0; width: 300px; }
    .tab-buttons { display: flex; gap: 10px; margin-top: 15px; }
    .tab-buttons button { padding: 10px 20px; border: none; background: #ccc; cursor: pointer; border-radius: 5px; }
    .tab-buttons button.active { background: #007BFF; color: white; }
    .tab-content { display: none; margin-top: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; }
    .tab-content.active { display: block; }
    .file-item { margin: 5px 0; display: flex; align-items: center; gap: 10px; }
    .copy-btn { padding: 5px 10px; cursor: pointer; background: #28a745; color: white; border: none; border-radius: 4px; }
    #copyNotification {
      position: fixed; bottom: 20px; right: 20px; background: #28a745; color: white;
      padding: 10px 20px; border-radius: 5px; display: none; font-size: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3); animation: fadeInOut 1.2s ease forwards;
      max-width: 350px; word-break: break-word;
    }
    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(20px); }
      20% { opacity: 1; transform: translateY(0); }
      80% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(20px); }
    }
  </style>
</head>
<body>
  <h2>Deliverable File Naming</h2>

  <div>
    <label>Prism ID: <input type="text" id="prismId" oninput="generateFileNames();"></label><br>
    <label>Project Name: <input type="text" id="projectName" oninput="generateFileNames();"></label><br>
    <label>Fiber Name: <input type="text" id="fiberNameMain" oninput="generateFileNames();"></label><br>
    <label>Fiber Name (Report 1): <input type="text" id="fiberName1" oninput="generateFileNames();"></label><br>
    <label>Buffer Name (Report 1): <input type="text" id="buffer1" oninput="generateFileNames();"></label><br>
    <label>Fiber Name (Report 2): <input type="text" id="fiberName2" oninput="generateFileNames();"></label><br>
    <label>Buffer Name (Report 2): <input type="text" id="buffer2" oninput="generateFileNames();"></label><br>
    <label>Fiber for Overview: <input type="text" id="fiberOverview" oninput="generateFileNames();"></label><br>
    <label>Buffer for Overview: <input type="text" id="bufferOverview" oninput="generateFileNames();"></label><br>
    <label>Enclosure Name: <input type="text" id="enclosureName" oninput="generateFileNames();"></label>
  </div>

  <div class="tab-buttons">
    <button class="tab-btn active" data-tab="coax">Coax</button>
    <button class="tab-btn" data-tab="fiber">Fiber</button>
    <button class="tab-btn" data-tab="zip">Zip</button>
  </div>

  <div id="coax" class="tab-content active">
    <h3>Coax File Names</h3>
    <div id="coaxList"></div>
  </div>

  <div id="fiber" class="tab-content">
    <h3>Fiber File Names</h3>
    <div id="fiberList"></div>
  </div>

  <div id="zip" class="tab-content">
    <h3>Zip File Names</h3>
    <div id="zipList"></div>
  </div>

  <div id="copyNotification">Copied!</div>

  <script>
    const buttons = document.querySelectorAll('.tab-btn');
    const contents = document.querySelectorAll('.tab-content');
    const copyNotification = document.getElementById('copyNotification');

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        buttons.forEach(b => b.classList.remove('active'));
        contents.forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
        generateFileNames();
      });
    });

    function generateFileNames() {
      const prismId = document.getElementById('prismId').value.trim().toUpperCase();
      const projectName = document.getElementById('projectName').value.trim().toUpperCase();
      const fiberNameMain = document.getElementById('fiberNameMain').value.trim().toUpperCase();
      const fiberName1 = document.getElementById('fiberName1').value.trim().toUpperCase();
      const buffer1 = document.getElementById('buffer1').value.trim().toUpperCase();
      const fiberName2 = document.getElementById('fiberName2').value.trim().toUpperCase();
      const buffer2 = document.getElementById('buffer2').value.trim().toUpperCase();
      const fiberOverview = document.getElementById('fiberOverview').value.trim().toUpperCase();
      const bufferOverview = document.getElementById('bufferOverview').value.trim().toUpperCase();
      const enclosureName = document.getElementById('enclosureName').value.trim().toUpperCase();

      // COAX
      const coaxFiles = [];
      if (prismId && projectName) {
        coaxFiles.push(`Before Print: ${prismId}_${projectName}_BEFORE_COAX`);
        coaxFiles.push(`After Print: ${prismId}_${projectName}_AFTER_COAX`);
        coaxFiles.push(`BOM: ${prismId}_${projectName}_BOM_COAX`);
        coaxFiles.push(`HAF: ${prismId}_${projectName}_HAF_COAX`);
      }
      displayFiles('coaxList', coaxFiles);

      // FIBER
      const fiberFiles = [];
      if (prismId && projectName) {
        fiberFiles.push(`Before Print: ${prismId}_${projectName}_BEFORE_FIBER`);
        fiberFiles.push(`After Print: ${prismId}_${projectName}_AFTER_FIBER`);
        fiberFiles.push(`BOM: ${prismId}_${projectName}_BOM_FIBER`);
        fiberFiles.push(`HAF: ${prismId}_${projectName}_HAF_FIBER`);
        fiberFiles.push(`Splice Report: ${prismId}_${projectName}_SPLICE REPORTS_FIBER`);
      }
      if (fiberName1 && buffer1) fiberFiles.push(`Trace Report 1: ${fiberNameMain}_${fiberName1}_${buffer1}_TRACE REPORT_FIBER`);
      if (fiberName2 && buffer2) fiberFiles.push(`Trace Report 2: ${fiberNameMain}_${fiberName2}_${buffer2}_TRACE REPORT_FIBER`);
      if (fiberName1 && buffer1) fiberFiles.push(`Affected Traffic Report 1: ${fiberNameMain}_${fiberName1}_${buffer1}_AFFECTED_TRAFFIC_FIBER`);
      if (fiberName2 && buffer2) fiberFiles.push(`Affected Traffic Report 2: ${fiberNameMain}_${fiberName2}_${buffer2}_AFFECTED_TRAFFIC_FIBER`);
      if (enclosureName) fiberFiles.push(`Schematic Report: ${enclosureName}_SCHEMATIC_FIBER`);
      if (fiberOverview && bufferOverview) fiberFiles.push(`Overview Print: ${fiberNameMain}_${fiberOverview}_${bufferOverview}_OVERVIEW_FIBER`);
      displayFiles('fiberList', fiberFiles);

      // ZIP
      const zipFiles = [];
      if (prismId) {
        zipFiles.push(`Coax: ${prismId}_FINAL_DESIGN_COAX`);
        zipFiles.push(`Fiber: ${prismId}_FINAL_DESIGN_FIBER`);
      }
      displayFiles('zipList', zipFiles);
    }

    function displayFiles(containerId, files) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      files.forEach(file => {
        const div = document.createElement('div');
        div.className = 'file-item';
        div.innerHTML = `<span>${file}</span> <button class="copy-btn" onclick="copyToClipboard('${file}')">Copy</button>`;
        container.appendChild(div);
      });
    }

    function copyToClipboard(text) {
      const actualText = text.split(':')[1]?.trim().toUpperCase();
      if (!actualText) return;
      navigator.clipboard.writeText(actualText).then(() => {
        showCopyNotification(actualText);
      }).catch(() => {
        // Fallback
        const textarea = document.createElement('textarea');
        textarea.value = actualText;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        showCopyNotification(actualText);
      });
    }

    function showCopyNotification(filename) {
      copyNotification.innerText = `Copied: ${filename}`;
      copyNotification.style.display = 'block';
      copyNotification.style.animation = 'none';
      void copyNotification.offsetWidth; // restart animation
      copyNotification.style.animation = 'fadeInOut 1.2s ease forwards';
      setTimeout(() => {
        copyNotification.style.display = 'none';
      }, 1200);
    }

    // Initialize
    generateFileNames();
  </script>
</body>
</html>
